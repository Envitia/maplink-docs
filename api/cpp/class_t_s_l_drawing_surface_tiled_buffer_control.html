<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MapLink Pro: TSLDrawingSurfaceTiledBufferControl Class Reference</title>
<link rel="icon" href="MapLink Pro 11 Logo Circle No Shadow FX New V1.1.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="envitia.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="MapLink Pro 11 Logo New V1.1.png"/></td>
  <td id="projectalign">
   <div id="projectname">MapLink Pro<span id="projectnumber">&#160;11.1.1.0.</span>
   </div>
   <div id="projectbrief">Envitia MapLink Pro: The Ultimate Mapping Application Toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>MapLink&#160;Pro</span></a></li>
      <li><a href="topics.html"><span>MapLink&#160;Pro&#160;C++&#160;API</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_t_s_l_drawing_surface_tiled_buffer_control.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_t_s_l_drawing_surface_tiled_buffer_control-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">TSLDrawingSurfaceTiledBufferControl Class Reference<div class="ingroups"><a class="el" href="group__apigroup__maplink__pro__developers__toolkit.html">MapLink Pro Developer Toolkit</a> &raquo; <a class="el" href="group__apigroup__api.html">Core API</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides access to settings that allow an application to fine-tune the behaviour of tiled buffered layers.</p>
<p>When tiled buffering is active, buffered layers are drawn in a background thread to a set of images, and these images are drawn to the screen in the application's drawing thread instead of drawing the buffered layers themselves. This provides significant performance benefits when using complex but otherwise unchanging data layers.</p>
<p>As the buffered layers are already drawn in a background thread, these layers should not use an asynchronous loader such as the TSLMTFileLoader. When using a data layer containing a <a class="el" href="class_t_s_l_file_loader_remote.html">TSLFileLoaderRemote</a> (such as the <a class="el" href="class_t_s_l_w_m_s_data_layer.html">TSLWMSDataLayer</a>) the data layer should be set to use synchronous loading through the appropriate data layer specific API methods.</p>
<p>When new tiles are available for drawing, the drawing surface's draw callback will be invoked from the background thread to request an application redraw. Refer to <a class="el" href="class_t_s_l_drawing_surface.html#ab98ffd5550409dab6aa56886979538b3">TSLDrawingSurface::setRedrawCallback</a> for more details.</p>
<h2><a class="anchor" id="autotoc_md66"></a>
Data layer specific notes</h2>
<p>Many data layers internally provide a mechanism managing changes to the layer between the application thread and the internal background thread used to draw the buffered layers. For these layers the application can simply update the layer as normal and the changes will be automatically reflected in the buffered tiles.</p>
<p>Some layers do not provide this mechanism. When buffering these layers the application must ensure that they use the lockBackgroundThread and unlockBackgroundThread methods to ensure that they have exclusive access to the layer when changing its contents. This applies to the following data layers:</p><ul>
<li><a class="el" href="class_t_s_l_standard_data_layer.html">TSLStandardDataLayer</a></li>
<li><a class="el" href="class_t_s_l_raster_data_layer.html">TSLRasterDataLayer</a></li>
<li><a class="el" href="class_t_s_l_filter_data_layer.html">TSLFilterDataLayer</a></li>
<li><a class="el" href="class_t_s_l_n_i_t_f_filter_data_layer.html">TSLNITFFilterDataLayer</a></li>
<li><a class="el" href="class_t_s_l_lat_long_grid_data_layer.html">TSLLatLongGridDataLayer</a></li>
<li><a class="el" href="class_t_s_l_m_g_r_s_grid_data_layer.html">TSLMGRSGridDataLayer</a></li>
<li><a class="el" href="class_t_s_l_g_a_r_s_grid_data_layer.html">TSLGARSGridDataLayer</a></li>
<li><a class="el" href="class_t_s_l_national_grid_data_layer.html">TSLNationalGridDataLayer</a></li>
<li><a class="el" href="class_t_s_l_s63_data_layer.html">TSLS63DataLayer</a></li>
<li>TSLDatabaseDataLayer</li>
</ul>
<h2><a class="anchor" id="autotoc_md67"></a>
Notes</h2>
<p>When rotating the drawing surface text and symbols in buffered layers will always rotate with the surface regardless of their rotation settings. This is because the buffered tiles are drawn in the background thread unrotated. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3d253c96e7bc650bc3ca5621e48db5d9" id="r_a3d253c96e7bc650bc3ca5621e48db5d9"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3d253c96e7bc650bc3ca5621e48db5d9">cacheSize</a> () const</td></tr>
<tr class="separator:a3d253c96e7bc650bc3ca5621e48db5d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48342c9e49248703b8bc3d4e80d16dd7" id="r_a48342c9e49248703b8bc3d4e80d16dd7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a48342c9e49248703b8bc3d4e80d16dd7">cacheSize</a> (unsigned int newSize)</td></tr>
<tr class="separator:a48342c9e49248703b8bc3d4e80d16dd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69a2d057f8abea5a74c0082cf795eccb" id="r_a69a2d057f8abea5a74c0082cf795eccb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a69a2d057f8abea5a74c0082cf795eccb">clearCache</a> ()</td></tr>
<tr class="separator:a69a2d057f8abea5a74c0082cf795eccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e1fc2f944fb964fc7f857b1eb7e356b" id="r_a3e1fc2f944fb964fc7f857b1eb7e356b"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3e1fc2f944fb964fc7f857b1eb7e356b">drawExtentExpansion</a> () const</td></tr>
<tr class="separator:a3e1fc2f944fb964fc7f857b1eb7e356b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1c5ea6e2b004eb5273da9b032179d1" id="r_aaa1c5ea6e2b004eb5273da9b032179d1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa1c5ea6e2b004eb5273da9b032179d1">drawExtentExpansion</a> (unsigned int amount)</td></tr>
<tr class="separator:aaa1c5ea6e2b004eb5273da9b032179d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca6ebbef0cc0970c24ca8dc8a0d7dc9f" id="r_aca6ebbef0cc0970c24ca8dc8a0d7dc9f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aca6ebbef0cc0970c24ca8dc8a0d7dc9f">lockBackgroundThread</a> ()</td></tr>
<tr class="separator:aca6ebbef0cc0970c24ca8dc8a0d7dc9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4088b59e383c76cc518dd65b2efc6797" id="r_a4088b59e383c76cc518dd65b2efc6797"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4088b59e383c76cc518dd65b2efc6797">tileSize</a> () const</td></tr>
<tr class="separator:a4088b59e383c76cc518dd65b2efc6797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41d9b1493ae78c0c57d03102a08498b9" id="r_a41d9b1493ae78c0c57d03102a08498b9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a41d9b1493ae78c0c57d03102a08498b9">tileSize</a> (unsigned int size)</td></tr>
<tr class="separator:a41d9b1493ae78c0c57d03102a08498b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c1f5afea9737f7452645ccebdb7e3f6" id="r_a2c1f5afea9737f7452645ccebdb7e3f6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c1f5afea9737f7452645ccebdb7e3f6">unlockBackgroundThread</a> ()</td></tr>
<tr class="separator:a2c1f5afea9737f7452645ccebdb7e3f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3d253c96e7bc650bc3ca5621e48db5d9" name="a3d253c96e7bc650bc3ca5621e48db5d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d253c96e7bc650bc3ca5621e48db5d9">&#9670;&#160;</a></span>cacheSize() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int TSLDrawingSurfaceTiledBufferControl::cacheSize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the size of the tile cache in Kb. </p>

</div>
</div>
<a id="a48342c9e49248703b8bc3d4e80d16dd7" name="a48342c9e49248703b8bc3d4e80d16dd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48342c9e49248703b8bc3d4e80d16dd7">&#9670;&#160;</a></span>cacheSize() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TSLDrawingSurfaceTiledBufferControl::cacheSize </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>newSize</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the size of the tile cache used to store buffered tiles. A larger cache size allows for more tiles to be stored, which reduces the frequency of tile redrawing when panning around a map.</p>
<p>The default cache size is 128Mb.</p>
<p>Argument size description:</p>
<p>newSize: The size of the tile cache to use, in Kb.</p>
<p>Returns true if the cache size was updated, or false if tiled buffering has been disabled in the drawing surface. </p>

</div>
</div>
<a id="a69a2d057f8abea5a74c0082cf795eccb" name="a69a2d057f8abea5a74c0082cf795eccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69a2d057f8abea5a74c0082cf795eccb">&#9670;&#160;</a></span>clearCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TSLDrawingSurfaceTiledBufferControl::clearCache </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Forcibly deletes all buffered tiles generated so far. This method may be useful when modifying buffered layers in ways that are not automatically detected in order to force the buffered tiles to be redrawn. </p>

</div>
</div>
<a id="a3e1fc2f944fb964fc7f857b1eb7e356b" name="a3e1fc2f944fb964fc7f857b1eb7e356b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e1fc2f944fb964fc7f857b1eb7e356b">&#9670;&#160;</a></span>drawExtentExpansion() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int TSLDrawingSurfaceTiledBufferControl::drawExtentExpansion </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the number of tiles that draw extents will be expanded by. </p>

</div>
</div>
<a id="aaa1c5ea6e2b004eb5273da9b032179d1" name="aaa1c5ea6e2b004eb5273da9b032179d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa1c5ea6e2b004eb5273da9b032179d1">&#9670;&#160;</a></span>drawExtentExpansion() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TSLDrawingSurfaceTiledBufferControl::drawExtentExpansion </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>amount</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When drawing, the extent used to determine the buffered tiles needed for the current view area is expanded by this number of tiles. This allows pre-loading of tiles outside of the current view area so that they are immediately available when panning the view.</p>
<p>The default expansion amount is one tile. Larger values allow for more tiles to be preloaded at the current view resolution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">amount</td><td>The amount to expand draw requests by in number of tiles.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the value was updated successfully, or false if tiled layer buffering has been disabled in the drawing surface. </dd></dl>

</div>
</div>
<a id="aca6ebbef0cc0970c24ca8dc8a0d7dc9f" name="aca6ebbef0cc0970c24ca8dc8a0d7dc9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca6ebbef0cc0970c24ca8dc8a0d7dc9f">&#9670;&#160;</a></span>lockBackgroundThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TSLDrawingSurfaceTiledBufferControl::lockBackgroundThread </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Locks a mutex that stops the background thread from accessing data layers in the drawing surface.</p>
<p>Some data layers do not provide an automatic mechanism for thread-safe updates when the contents of the layer is updated. For these layers the application must must this method when changing the contents of the layer to ensure that the layer will only be accessed from one thread at a time. See the class documentation for more details.</p>
<p>Applications should not call other methods on this class while holding the mutex or the application may deadlock.</p>
<p>The application must call unlockBackgroundThread to release the mutex. </p>

</div>
</div>
<a id="a4088b59e383c76cc518dd65b2efc6797" name="a4088b59e383c76cc518dd65b2efc6797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4088b59e383c76cc518dd65b2efc6797">&#9670;&#160;</a></span>tileSize() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int TSLDrawingSurfaceTiledBufferControl::tileSize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current size of buffered tiles, in pixels. </p>

</div>
</div>
<a id="a41d9b1493ae78c0c57d03102a08498b9" name="a41d9b1493ae78c0c57d03102a08498b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41d9b1493ae78c0c57d03102a08498b9">&#9670;&#160;</a></span>tileSize() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TSLDrawingSurfaceTiledBufferControl::tileSize </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the size of buffered tiles, in pixels.</p>
<p>The default tile size is 512x512.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The new tile size to use</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the tile size was updated, or false if tiled layer buffering was disabled on the drawing surface. </dd></dl>

</div>
</div>
<a id="a2c1f5afea9737f7452645ccebdb7e3f6" name="a2c1f5afea9737f7452645ccebdb7e3f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c1f5afea9737f7452645ccebdb7e3f6">&#9670;&#160;</a></span>unlockBackgroundThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TSLDrawingSurfaceTiledBufferControl::unlockBackgroundThread </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases the mutex acquired by <a class="el" href="#aca6ebbef0cc0970c24ca8dc8a0d7dc9f">lockBackgroundThread()</a>. If an application calls <a class="el" href="#aca6ebbef0cc0970c24ca8dc8a0d7dc9f">lockBackgroundThread()</a> it must call this method to release the mutex before any further buffered tiles can be generated. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_t_s_l_drawing_surface_tiled_buffer_control.html">TSLDrawingSurfaceTiledBufferControl</a></li>
    <li class="footer"><a href="https://envitia.github.io/maplink-docs/">MapLink Pro</a> 11.1.1.0. | Documentation created Fri Feb 14 2025 19:42:23 | Generated with <a href="http://www.doxygen.org/index.html">Doxygen 1.13.2</a> | <a href="mailto:support@envitia.com">Contact Us</a> | &copy; 2025 <a href="http://www.envitia.com">Envitia Ltd.</a></li>
  </ul>
</div>
</body>
</html>
