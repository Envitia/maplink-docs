<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MapLink Pro .NET: Using the Track Display Manager</title>
<link rel="icon" href="MapLink Pro 11 Logo Circle No Shadow FX New V1.1.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="envitia.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="MapLink Pro 11 Logo New V1.1.png"/></td>
  <td id="projectalign">
   <div id="projectname">MapLink Pro .NET<span id="projectnumber">&#160;11.2</span>
   </div>
   <div id="projectbrief">Envitia MapLink Pro: The Ultimate Mapping Application Toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>MapLink&#160;Pro</span></a></li>
      <li><a href="topics.html"><span>MapLink&#160;Pro&#160;.NET&#160;API</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('trackdisplaymanager_page.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Using the Track Display Manager</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#trackdisplaymanager_introduction">Introduction</a>
  </li>
  <li class="level1">
    <a href="#trackdisplaymanager_basics">Track Display Manager Basics</a>
    <ul>
      <li class="level2">
        <a href="#trackdisplaymanager_basics_creating">Creating a TrackDisplayManager</a>
      </li>
      <li class="level2">
        <a href="#trackdisplaymanager_basics_association">Associating a TrackDisplayManager with a drawing surface</a>
      </li>
      <li class="level2">
        <a href="#trackdisplaymanager_basics_creating_tracks">Creating Tracks</a>
      </li>
      <li class="level2">
        <a href="#trackdisplaymanager_basics_visualisation">Track Visualisation</a>
        <ul>
          <li class="level3">
            <a href="#trackdisplaymanager_basics_visualisation_pointsymbols">Point Symbols</a>
          </li>
          <li class="level3">
            <a href="#trackdisplaymanager_basics_visualisation_selectionsymbols">Selection Symbols</a>
          </li>
          <li class="level3">
            <a href="#trackdisplaymanager_basics_visualisation_historysymbols">History Symbols</a>
          </li>
          <li class="level3">
            <a href="#trackdisplaymanager_basics_visualisation_headingindicators">Heading Indicators</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#trackdisplaymanager_basics_adding_tracks">Adding Tracks to a TrackDisplayManager</a>
      </li>
      <li class="level2">
        <a href="#trackdisplaymanager_basics_updating_tracks">Setting Track Positions</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#trackdisplaymanager_decluttering">Decluttering Tracks</a>
  </li>
  <li class="level1">
    <a href="#trackdisplaymanager_picking">Picking Tracks</a>
  </li>
  <li class="level1">
    <a href="#trackdisplaymanager_history">Storing and Viewing Track History</a>
  </li>
  <li class="level1">
    <a href="#trackdisplaymanager_custom_symbols">Creating Custom Symbols</a>
    <ul>
      <li class="level2">
        <a href="#text_replacement_sec">Special Text Fields in Custom Symbols</a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="trackdisplaymanager_introduction"></a>
Introduction</h1>
<p>The  TrackDisplayManager  provides an easy way to create and display dynamic objects representing real-world entities that frequently change position. Tracks can be styled using application-defined symbols, or the APP6A and 2525B military symbology standards.</p>
<p>Each real-world entity is represented in the application by an instance of the  Track  class, which contains information about the entity such as it's position, altitude, heading and velocity. Each track uses one or more  symbol  derived classes to define the appearance of the track at various zoom levels, the appearance of the track's <a class="el" href="#trackdisplaymanager_basics_visualisation_selectionsymbols">selection indicator</a> (to visually identify when a track will be used for application-defined operations) and the appearance of the track's <a class="el" href="#trackdisplaymanager_basics_visualisation_historysymbols">history trail</a>.</p>
<p>Tracks are associated with a  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surface</a>  using the  TrackDisplayManager  class. The  TrackDisplayManager  acts as a container for a group of tracks within the application, and provides methods for efficiently updating common properties on large numbers of tracks at once. It also provides the capability to record and replay the status of tracks over time, allowing the viewing of the history of the tracks in the  TrackDisplayManager  </p>
<h1><a class="anchor" id="trackdisplaymanager_basics"></a>
Track Display Manager Basics</h1>
<p>When using the Track Display Manager all applications need to perform the following steps:</p><ol type="1">
<li><a class="el" href="#trackdisplaymanager_basics_creating">Create a TrackDisplayManager</a>.</li>
<li><a class="el" href="#trackdisplaymanager_basics_association">Associate the TrackDisplayManager with one or more drawing surfaces.</a></li>
<li><a class="el" href="#trackdisplaymanager_basics_creating_tracks">Create a Track object for each real-world entity</a>.</li>
<li><a class="el" href="#trackdisplaymanager_basics_visualisation">Define the visualisation settings for each Track</a>.</li>
<li><a class="el" href="#trackdisplaymanager_basics_adding_tracks">Add the Track objects to the TrackDisplayManager</a>.</li>
<li><a class="el" href="#trackdisplaymanager_basics_updating_tracks">Set and update the position of the Tracks in the TrackDisplayManager</a>.</li>
</ol>
<h2><a class="anchor" id="trackdisplaymanager_basics_creating"></a>
Creating a TrackDisplayManager</h2>
<p>A track display manager is created through the  TrackDisplayManager.create  method.  An application can create multiple TrackDisplayManagers if desired. A newly created TrackDisplayManager contains no tracks and is not associated with any  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surfaces</a>  This would be configured as follows:  </p><div class="fragment"><div class="line"><a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_display_manager.html">TSLNTrackDisplayManager</a> manager = <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_display_manager.html">TSLNTrackDisplayManager</a>.create();</div>
<div class="ttc" id="aclass_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_display_manager_html"><div class="ttname"><a href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_display_manager.html">Envitia::MapLink::TrackManager::TSLNTrackDisplayManager</a></div><div class="ttdef"><b>Definition</b> TSLNTrackDisplayManager.cs:65</div></div>
<div class="ttc" id="anamespace_envitia_1_1_map_link_1_1_track_manager_html"><div class="ttname"><a href="namespace_envitia_1_1_map_link_1_1_track_manager.html">Envitia::MapLink::TrackManager</a></div><div class="ttdef"><b>Definition</b> TSLNPickResultTrack.cs:11</div></div>
<div class="ttc" id="anamespace_envitia_1_1_map_link_html"><div class="ttname"><a href="namespace_envitia_1_1_map_link.html">Envitia::MapLink</a></div><div class="ttdef"><b>Definition</b> tsln2ddrawingsurface.h:16</div></div>
<div class="ttc" id="anamespace_envitia_html"><div class="ttname"><a href="namespace_envitia.html">Envitia</a></div><div class="ttdef"><b>Definition</b> tsln2ddrawingsurface.h:14</div></div>
</div><!-- fragment --> <h2><a class="anchor" id="trackdisplaymanager_basics_association"></a>
Associating a TrackDisplayManager with a drawing surface</h2>
<p>In order for tracks in a  TrackDisplayManager  to be drawn, the  TrackDisplayManager  must be associated with a  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surface</a>  . This is performed through the  TrackDisplayManager.addDrawingSurface()  method. This creates a data layer on the  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surface</a>  that represents the tracks within the manager and provides access to all of the normal data layer functionality.</p>
<p>A  TrackDisplayManager  can be associated with more than one  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surface</a>  allowing for different views to be shown of the same set of tracks. When a  TrackDisplayManager  is associated with multiple  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surfaces</a>  , each  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surface</a>  must use a compatible coordinate system.</p>
<p>This would be configured as follows:  </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> surfaceId = manager.addDrawingSurface(drawingSurface, <span class="stringliteral">&quot;trackManagerName&quot;</span>);</div>
</div><!-- fragment --> <h2><a class="anchor" id="trackdisplaymanager_basics_creating_tracks"></a>
Creating Tracks</h2>
<p>Each real-world entity the application wishes to display requires a  Track  object.  These are created through the  Track.create  method.  When creating a track, a  TrackPointSymbol  must be provided which defines the base rendering for <a class="el" href="#trackdisplaymanager_basics_visualisation">visualisation of the track</a>.</p>
<p>At a minimum, a track must have its position set via the  Track.move()  ,  TrackDisplayManager.moveTrack()  or  TrackDisplayManager.moveTracks()  methods prior to the track being displayed for the first time.</p>
<h2><a class="anchor" id="trackdisplaymanager_basics_visualisation"></a>
Track Visualisation</h2>
<p>Each track uses one or more  symbol  objects to define how that track should be drawn. Each symbol represents a level of detail which allows for the visual complexity of a symbol to be altered based on the  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surface</a>  's zoom level. In a simple situation a track may be configured with two levels of detail:</p><ul>
<li>A complex symbol for display when the view is zoomed in.</li>
<li>A simple symbol for display when the view is zoomed out.</li>
</ul>
<p>This would be configured as follows:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_t_s_l_n_symbol.html">TSLNSymbol</a> createPointSymbol(<span class="keywordtype">int</span> symbolIDVal, <span class="keywordtype">int</span> colour, <span class="keywordtype">int</span> size)</div>
<div class="line">{</div>
<div class="line">  <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_t_s_l_n_rendering_attributes.html">TSLNRenderingAttributes</a> attribs = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_t_s_l_n_rendering_attributes.html">TSLNRenderingAttributes</a>();</div>
<div class="line">  attribs.<a class="code hl_property" href="class_envitia_1_1_map_link_1_1_t_s_l_n_rendering_attributes.html#a345f6f0a2de8b29c3a573a9238a39d36">symbolStyle</a> = symbolIDVal;</div>
<div class="line">  attribs.symbolColour = colour;</div>
<div class="line">  attribs.symbolSizeFactor = size;</div>
<div class="line">  attribs.symbolSizeFactorUnits = <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.TSLNDimensionUnits.TSLNDimensionUnitsPixels;</div>
<div class="line">  </div>
<div class="line">  <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_t_s_l_n_symbol.html">TSLNSymbol</a> symbol = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_t_s_l_n_symbol.html">TSLNSymbol</a>(0, 0, 0, 0);</div>
<div class="line">  symbol.<a class="code hl_function" href="class_envitia_1_1_map_link_1_1_t_s_l_n_entity_base.html#af5aa50ebbb93723d55b5d8ce492b03ca">setRendering</a>(attribs);</div>
<div class="line">  <span class="keywordflow">return</span> symbol;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_point_symbol.html">TSLNTrackPointSymbol</a> lowDetail = <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_point_symbol.html">TSLNTrackPointSymbol</a>.create();</div>
<div class="line"><a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.TSLSymbol greenDot = createPointSymbol(1, 25.0, Color.Green); <span class="comment">// Display as a green dot</span></div>
<div class="line">lowDetail.addSymbolEntity(greenDot, <span class="keyword">false</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// By default maximumResolution is set such that there is no upper limit to when the symbol will be shown so this</span></div>
<div class="line"><span class="comment">// does not need to be set for the low detail symbol</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_point_symbol.html">TSLNTrackPointSymbol</a> highDetail = <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_point_symbol.html">TSLNTrackPointSymbol</a>.create();</div>
<div class="line"><a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_t_s_l_n_symbol.html">TSLNSymbol</a> redAeroplane = createPointSymbol(6002, 35.0, Color.Red)); <span class="comment">// Display as a red aeroplane</span></div>
<div class="line">highDetail.addSymbolEntity(redAeroplane, <span class="keyword">false</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Only show this symbol up to 10,000 MU per pixel, otherwise show the other symbol</span></div>
<div class="line">highDetail.maximumResolution( 10000.0 ); </div>
<div class="line"> </div>
<div class="line"><a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track.html">TSLNTrack</a> track = <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track.html">TSLNTrack</a>.create(highDetail);</div>
<div class="line">track.addSymbol( lowDetail );</div>
<div class="ttc" id="aclass_envitia_1_1_map_link_1_1_t_s_l_n_entity_base_html_af5aa50ebbb93723d55b5d8ce492b03ca"><div class="ttname"><a href="class_envitia_1_1_map_link_1_1_t_s_l_n_entity_base.html#af5aa50ebbb93723d55b5d8ce492b03ca">Envitia::MapLink::TSLNEntityBase::setRendering</a></div><div class="ttdeci">bool setRendering(TSLNRenderingAttributeInt attribute, int value)</div></div>
<div class="ttc" id="aclass_envitia_1_1_map_link_1_1_t_s_l_n_rendering_attributes_html"><div class="ttname"><a href="class_envitia_1_1_map_link_1_1_t_s_l_n_rendering_attributes.html">Envitia::MapLink::TSLNRenderingAttributes</a></div><div class="ttdef"><b>Definition</b> tslnrenderingattributes.h:31</div></div>
<div class="ttc" id="aclass_envitia_1_1_map_link_1_1_t_s_l_n_rendering_attributes_html_a345f6f0a2de8b29c3a573a9238a39d36"><div class="ttname"><a href="class_envitia_1_1_map_link_1_1_t_s_l_n_rendering_attributes.html#a345f6f0a2de8b29c3a573a9238a39d36">Envitia::MapLink::TSLNRenderingAttributes::symbolStyle</a></div><div class="ttdeci">int symbolStyle</div><div class="ttdef"><b>Definition</b> tslnrenderingattributes.h:552</div></div>
<div class="ttc" id="aclass_envitia_1_1_map_link_1_1_t_s_l_n_symbol_html"><div class="ttname"><a href="class_envitia_1_1_map_link_1_1_t_s_l_n_symbol.html">Envitia::MapLink::TSLNSymbol</a></div><div class="ttdef"><b>Definition</b> tslnsymbol.h:26</div></div>
<div class="ttc" id="aclass_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_html"><div class="ttname"><a href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track.html">Envitia::MapLink::TrackManager::TSLNTrack</a></div><div class="ttdef"><b>Definition</b> TSLNTrack.cs:35</div></div>
<div class="ttc" id="aclass_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_point_symbol_html"><div class="ttname"><a href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_point_symbol.html">Envitia::MapLink::TrackManager::TSLNTrackPointSymbol</a></div><div class="ttdef"><b>Definition</b> TSLNTrackPointSymbol.cs:41</div></div>
</div><!-- fragment --> <p>At runtime the symbol displayed for each track will then automatically change based on the viewing resolution of the associated  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surface</a> </p><div class="image">
<img src="track_lod.png" alt=""/>
<div class="caption">
Track level of detail switching</div></div>
 <p>A track can have as many levels of detail as required, and each level of detail can use a different type of symbol. A single  symbol  instance can be shared by multiple  Tracks  when the tracks require identical rendering at a given level of detail.</p>
<h3><a class="anchor" id="trackdisplaymanager_basics_visualisation_pointsymbols"></a>
Point Symbols</h3>
<p>Point symbols are the basic type of symbol. Each TSLNTrackPointSymbol consists of one or more MapLink entities, all of which will be drawn in the order specified. This allows for complex symbols to be built up from a set of component parts. MapLink comes with hundreds of pre-configured symbols for a wide variety of scenarios. Applicaton-specific symbols can be created by:</p><ul>
<li>Using Symbol Studio to create a tmf symbol and adding it to config/symbols/tslsymbolsuser.dat</li>
<li>Adding custom raster symbols to config/symbols/tslsymbolsuser.dat</li>
<li>Providing application-defined entities to a point symbol at runtime</li>
</ul>
<div class="image">
<img src="pointsymbols.png" alt=""/>
<div class="caption">
Examples of Point Symbols</div></div>
 <h3><a class="anchor" id="trackdisplaymanager_basics_visualisation_selectionsymbols"></a>
Selection Symbols</h3>
<p>Selection symbols represent an additional symbol which will be drawn when a track has been marked as 'selected'. These symbols may be drawn as a replacement for the track symbol or as an additional symbol on top.</p>
<p>This functionality is usually used to indicate that a track has been 'clicked' by the user, or to otherwise highlight it out of a larger set of tracks.</p>
<p>Any track symbol may be used as a selection symbol but typically a <a class="el" href="#trackdisplaymanager_basics_visualisation_pointsymbols">point symbol</a> is used.</p>
<p>Selection symbols are set on  point symbols  . This means that each level of detail in a track can use a different selection symbol. This allows the selection symbol to be resized/changed relative to the track symbol in situations where a track has multiple levels of detail.</p>
<div class="image">
<img src="selection_symbols.png" alt=""/>
<div class="caption">
A track using a white box as a selection symbol</div></div>
 <p>This would be configured as follows:  </p><div class="fragment"><div class="line"><span class="comment">// Create a point symbol to be used as the selection symbol</span></div>
<div class="line"><a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_point_symbol.html">TSLNTrackPointSymbol</a> selectionSymbol = createPointSymbol( 3, Color.Red, 80);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set the selection symbol on the track&#39;s point symbol</span></div>
<div class="line"><span class="comment">// The selection behaviour specifies whether the track&#39;s visualisation should be replaced when selected, or whether the selection symbol should be drawn in addition to the normal track symbol.</span></div>
<div class="line">trackSymbol.selectionSymbol(selectionSymbol, <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_symbol.html">TSLNTrackSymbol</a>.SelectionBehaviourAdditional);</div>
<div class="ttc" id="aclass_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_symbol_html"><div class="ttname"><a href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_symbol.html">Envitia::MapLink::TrackManager::TSLNTrackSymbol</a></div><div class="ttdef"><b>Definition</b> TSLNTrackSymbol.cs:29</div></div>
</div><!-- fragment --> <p>The second argument to  TSLNTrackSymbol.selectionSymbol()  specifies whether the selection symbol should replace or display in addition to the default symbol.</p>
<h3><a class="anchor" id="trackdisplaymanager_basics_visualisation_historysymbols"></a>
History Symbols</h3>
<p>History symbols are used to show the path a track has taken over time. In order for them to be drawn they must be enabled on the  TrackDisplayManager  containing the track using the  TrackDisplayManager.historyPointsVisible()  and  TrackDisplayManager.historyPointDistance()  methods. The number of history points to remember for each track and the visualisation type must also be set using the  TrackDisplayManager.numHistoryPoints()  and  TrackDisplayManager.historyPointType()  methods.</p>
<p>There are two types of history symbols, defined by the  TrackDisplayManager.HistoryPointType  enumeration. Square history points are extremely efficient to draw but only allow control over the colour of the point, set on the  Track.historyPointColour()  . Symbol history points are defined by a single identifier from the symbol configuration file in the same way as <a class="el" href="#trackdisplaymanager_basics_visualisation_selectionsymbols">selection symbols</a> and <a class="el" href="#trackdisplaymanager_basics_visualisation_pointsymbols">point symbols</a>, allowing more control over their appearance at the cost of drawing performance. </p><div class="image">
<img src="history_points.png" alt=""/>
<div class="caption">
Square history points showing a track's path over time</div></div>
 <p>This would be configured as follows:  </p><div class="fragment"><div class="line"><span class="comment">// Keep 20 seconds of history</span></div>
<div class="line">manager.historicDataExpiry(20);</div>
<div class="line">manager.historyPointType(<a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_display_manager.html">TSLNTrackDisplayManager</a>.HistoryPointType.HistoryPointTypeSquare);</div>
<div class="line">manager.historyPointDistance(50000);</div>
<div class="line">manager.numHistoryPoints(4);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_history_symbol.html">TSLNTrackHistorySymbol</a> historySymbol = <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link_1_1_track_manager.html">TrackManager</a>.<a class="code hl_class" href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_history_symbol.html">TSLNTrackHistorySymbol</a>.create();</div>
<div class="line">historySymbol.colour(Color.FromArgb(0xff, 0xff, 0x00, 0xff));</div>
<div class="line">historySymbol.size(35);</div>
<div class="line">historySymbol.sizeUnits(<a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.TSLNDimensionUnitsPixels);</div>
<div class="line">historySymbol.symbolID(1);</div>
<div class="line">manager.historyPointSymbol(historySymbol);</div>
<div class="line">manager.historyPointsVisible(<span class="keyword">true</span>);</div>
<div class="ttc" id="aclass_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_history_symbol_html"><div class="ttname"><a href="class_envitia_1_1_map_link_1_1_track_manager_1_1_t_s_l_n_track_history_symbol.html">Envitia::MapLink::TrackManager::TSLNTrackHistorySymbol</a></div><div class="ttdef"><b>Definition</b> TSLNTrackHistorySymbol.cs:27</div></div>
</div><!-- fragment --> <h3><a class="anchor" id="trackdisplaymanager_basics_visualisation_headingindicators"></a>
Heading Indicators</h3>
<p>Tracks may optionally be shown with a heading indicator. For <a class="el" href="#trackdisplaymanager_basics_visualisation_pointsymbols">point symbols</a> this is a simple line that shows the heading of the track as set through the  Track.heading()  method. The visibility, colour and length of the heading indicators can be set on a per-track basis.</p>
<p>This would be configured as follows:  </p><div class="fragment"><div class="line">track1.headingIndicatorVisible(<span class="keyword">true</span>);</div>
<div class="line">track1.headingIndicatorLength(100, <a class="code hl_namespace" href="namespace_envitia.html">Envitia</a>.<a class="code hl_namespace" href="namespace_envitia_1_1_map_link.html">MapLink</a>.TSLNDimensionUnitsPixels);</div>
<div class="line">track1.heading(50);</div>
<div class="line"> </div>
<div class="line">track2.headingIndicatorVisible(<span class="keyword">false</span>);</div>
</div><!-- fragment --> <h2><a class="anchor" id="trackdisplaymanager_basics_adding_tracks"></a>
Adding Tracks to a TrackDisplayManager</h2>
<p>Once a track has been created it must be added to a  TrackDisplayManager  through the  TrackDisplayManager.addTrack()  method in order for the track to be displayed. A unique identifier for the track must be provided which is used to identify the track to other methods on the  TrackDisplayManager  . This identifier also controls the order that tracks in the manager will be drawn in. Tracks with a lower identifier will be drawn after those with a higher identifier.</p>
<p>The same track should not be added to more than one  TrackDisplayManager  This would be configured as follows:  </p><div class="fragment"><div class="line">manager.addTrack(trackNumber, track);</div>
</div><!-- fragment --> <h2><a class="anchor" id="trackdisplaymanager_basics_updating_tracks"></a>
Setting Track Positions</h2>
<p>As Tracks usually represent dynamic objects, it is usually necessary to frequently update their positions. As a minimum, for a track to appear in the correct position, it must have its position set using one of the following methods: </p><ul>
<li>TSLNTrack.move()</li>
<li>TSLNTrackDisplayManager.moveTrack()</li>
<li><p class="startli">TSLNTrackDisplayManager.moveTracks() </p>
<p class="startli">TSLNTrackDisplayManager.moveTracks()  is the most efficient method for updating the positions of many tracks at the same time.</p>
</li>
</ul>
<p>Example for  TSLNTrackDisplayManager.moveTracks() </p><div class="fragment"><div class="line">uint[] trackNumbers = <span class="keyword">new</span> uint[updatedTracksInformation.Count];</div>
<div class="line"><span class="keywordtype">double</span>[] latitudes = <span class="keyword">new</span> <span class="keywordtype">double</span>[updatedTracksInformation.Count];</div>
<div class="line"><span class="keywordtype">double</span>[] longitudes = <span class="keyword">new</span> <span class="keywordtype">double</span>[updatedTracksInformation.Count];</div>
<div class="line"><span class="keywordtype">int</span> index = 0;</div>
<div class="line"><span class="keywordflow">foreach</span> (var it <span class="keywordflow">in</span> updatedTracksInformation)</div>
<div class="line">{</div>
<div class="line">  trackNumbers[index] = it.Value.id;</div>
<div class="line">  latitudes[index] = it.Value.lat;</div>
<div class="line">  longitudes[index] = it.Value.lon;</div>
<div class="line">  </div>
<div class="line">  ++index;</div>
<div class="line">}</div>
<div class="line">trackManager.moveTracks(trackNumbers, latitudes, longitudes);</div>
</div><!-- fragment --> <p>Example for  TSLNTrackDisplayManager.moveTrack() </p><div class="fragment"><div class="line">manager.moveTrack(trackNumber, latitude, longitude);</div>
</div><!-- fragment --> <p>Example for  TSLNTrack.move() </p><div class="fragment"><div class="line">track.move(latitude, longitude);</div>
</div><!-- fragment --> <h1><a class="anchor" id="trackdisplaymanager_decluttering"></a>
Decluttering Tracks</h1>
<p>Tracks can be decluttered using the standard decluttering mechanism from the  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surface</a>  using the setDeclutterStatus() method. Unlike other types of layers, it is up to the application to define the types of features that exist for the track's data layer using the addFeatureRendering() method. Tracks can then be assigned one of the created feature types using either the  Track.featureName()  or  Track.featureID()  methods. Note that in order to set a track's feature type by name the track must first have been added to the  TrackDisplayManager  which has that feature defined in its associated data layer.</p>
<p>Once tracks have been assigned a feature type, decluttering that feature will inhibit the display any tracks of that feature type. Alternatively tracks can be hidden on an individual basis through the  Track.visible()  method. The track layer can be turned on and off entirely via the DataLayerProperties object through the layer properties.</p>
<h1><a class="anchor" id="trackdisplaymanager_picking"></a>
Picking Tracks</h1>
<p>Identifying tracks at a specific screen location is performed using the  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surface</a>  's standard picking mechanism. Picking on the data layer associated with a  TrackDisplayManager  will return the  Tracks  at the requested position. These can then be used in subsequent operations, such as marking the tracks as selected.</p>
<h1><a class="anchor" id="trackdisplaymanager_history"></a>
Storing and Viewing Track History</h1>
<p>The  TrackDisplayManager  can be asked to record changes to the state of its tracks (such as position and appearance) over time, and roll back the display of tracks to a previous point in time. To allow for this, the  TrackDisplayManager  has two distinct concepts of time:</p><ul>
<li>Current time, which represents the most up to date information about the tracks. Modifications to tracks such as changing their position or heading, always change the track state at the current time and not at the time currently being displayed by the manager.</li>
<li>Display time, which represents the point in time currently being displayed by the  TrackDisplayManager  . This may either be the same as the current time, or some time in the past.</li>
</ul>
<p>By default the  TrackDisplayManager  does not record the history of tracks. To enable history recording the manager must first be told how long history data should be kept for using the  TrackDisplayManager.historicDataExpiry()  method. Then, each time tracks are updated the manager should be informed of the time each track update should be stored for using the  TrackDisplayManager.currentTime()  method. Updating a track without also changing the current time in the  TrackDisplayManager  will overwrite the current value of the updated field(s), therefore a typical application's track update method should work as follows:  </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> TrackUpdater::updateTracks( TSLNTrackDisplayManager manager )</div>
<div class="line">{</div>
<div class="line">  manager.currentTime( getUpdateTime() ); <span class="comment">// getUpdateTime() is an application function that returns the time the track positions apply to</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// All updates are recorded against the current time set on the manager</span></div>
<div class="line">  manager.moveTracks( numTracks, trackIDs, latitudes, longitudes );</div>
<div class="line">  manager.updateTrackLabels( numTracks, trackIDs, velocities, headings, altitudes );</div>
<div class="line">}</div>
</div><!-- fragment --> <p>In order to make the  TrackDisplayManager  display the state of tracks in the past the  TrackDisplayManager.displayTime()  method should be used. This will cause the tracks within the manager to revert to the position and appearance that they had at that time. When viewing historical track information many query functions such as latitude, longitude, heading and velocity on the  Track  class will return the values for the track at the active <em>display</em> time rather than the <em>current</em> time.</p>
<p>The  Track  also provides methods to access information about the track at the current time regardless of the active display time. These methods are prefixed with 'current'. Therefore it is not necessary to reset the display time in the  TrackDisplayManager  in order to access information about tracks at the current time.</p>
<p>The visualisation settings of a track are not tracked across time, thus the values set on a track will apply regardless of the active display time. This includes visibility, selection status, heading indicator, history point, and the track symbol itself. Only the track's attribute such as position, altitude, and speed are tracked as part of the history data.</p>
<p>The memory usage when recording track history is minimised, by only storing the individual position/appearance values which have changed. However if data is stored for a long time, and very frequent updates are made to a lot of objects, the application may use a significant amount of memory.</p>
<h1><a class="anchor" id="trackdisplaymanager_custom_symbols"></a>
Creating Custom Symbols</h1>
<p>If the set of symbols provided with the  <a class="el" href="class_envitia_1_1_map_link_1_1_t_s_l_n_drawing_surface.html">drawing surface</a>  are not sufficient, new symbols can be created and used as <a class="el" href="#trackdisplaymanager_basics_visualisation_pointsymbols">point</a> or <a class="el" href="#trackdisplaymanager_basics_visualisation_historysymbols">history</a> symbols. New symbols can either be a raster (such as a PNG) or a vector symbol created in Symbol Studio (a Windows application that is installed with MapLink Studio). New symbols need to be added to the symbol resource file, at which point they can be referenced by their identifier in the same way as the provided symbols.</p>
<p>The colour specified on the <a class="el" href="#trackdisplaymanager_basics_visualisation_pointsymbols">point symbol</a>, <a class="el" href="#trackdisplaymanager_basics_visualisation_selectionsymbols">selection symbol</a> and <a class="el" href="#trackdisplaymanager_basics_visualisation_historysymbols">history symbols</a> will replace the <em>overrideable colour</em> defined in Symbol Studio.</p>
<h2><a class="anchor" id="text_replacement_sec"></a>
Special Text Fields in Custom Symbols</h2>
<p>When creating custom symbols, there are a number of special text strings that can be used which will automatically be replaced at runtime by the value of a property from the track(s) using the symbol. This is referred to as <em>text replacement</em> or <em>text substitution</em> in the Symbol Studio documentation.</p>
<p>The following special text strings are defined for custom symbols when used as a <a class="el" href="#trackdisplaymanager_basics_visualisation_pointsymbols">point symbol</a>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Text String   </th><th class="markdownTableHeadNone">Corresponding Track Property    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">__TN   </td><td class="markdownTableBodyNone">Name    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">__TH   </td><td class="markdownTableBodyNone">Heading    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">__TA   </td><td class="markdownTableBodyNone">Altitude    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">__TV   </td><td class="markdownTableBodyNone">Velocity   </td></tr>
</table>
<p>This text replacement functionality is also available for any text entity contained within a point symbol. The application may add any required attributes through the track class, which can then be displayed as part of the track's visualisation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="trackmanagerdeveloperguide_page.html">Tracks SDK Developer Guide</a></li>
    <li class="footer"><a href="https://envitia.github.io/maplink-docs/">MapLink Pro .NET</a> 11.2&nbsp;Documentation created Wed Jul 23 2025 17:46:33&nbsp;Generated with <a href="http://www.doxygen.org/index.html">Doxygen 1.13.2</a>&nbsp;<a href="mailto:support@envitia.com">Contact Us</a>&nbsp;&copy; 2025<a href="http://www.envitia.com">Envitia Ltd.</a></li>
  </ul>
</div>
</body>
</html>
